["{\"nodes\":{\"Augment_LightningUsers\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"USER_ID_DERIVED\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"D\",\"rightKey\":[\"Userid\"],\"rightSelect\":[\"Role.TeamMemberRole\",\"Role.Title\",\"Full_Name\",\"Username\",\"Userid\",\"Clean_Name\"]},\"sources\":[\"filter_login\",\"Augment_usertodept\"]},\"compute_uniquelogin\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Login\",\"name\":\"Login\",\"precision\":10,\"saqlExpression\":\"case \\nwhen (TIMESTAMP_DERIVED_day_epoch-Previous_Date_day_epoch)>=1 then 1 else 0\\nend\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"LoginTrue\",\"name\":\"LoginTrue\",\"saqlExpression\":\"case \\nwhen (TIMESTAMP_DERIVED_day_epoch-Previous_Date_day_epoch)>=1 then \\\"TRUE\\\" else \\\"FALSE\\\"\\nend\",\"type\":\"Text\"},{\"label\":\"First_LoginTrue\",\"name\":\"First_LoginTrue\",\"saqlExpression\":\"case\\nwhen 'First_Login' == 'TIMESTAMP_DERIVED' then \\\"TRUE\\\" else \\\"FALSE\\\"\\nend\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"compute_relativedates\"]},\"Delete_AIAColumns\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"Role.TeamMemberRole\"},{\"name\":\"Role.Title\"},{\"name\":\"AIA.TIMESTAMP_DERIVED\"},{\"name\":\"AIA.Lightning\"},{\"name\":\"AIA.User_Name\"},{\"name\":\"AIA.User_Profile_Name\"},{\"name\":\"AIA.User_Username\"}],\"mode\":\"drop\"},\"sources\":[\"Compute_AIAfields\"]},\"Augment_usertodept\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Userid\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"Role\",\"rightKey\":[\"UserId\"],\"rightSelect\":[\"TeamMemberRole\",\"Title\"]},\"sources\":[\"Extract_AIAUsers\",\"Extract_AcctTeamMember\"]},\"Augment_Users\":{\"action\":\"augment\",\"parameters\":{\"leftKey\":[\"Userid\"],\"operation\":\"LookupSingleValue\",\"relationship\":\"AIA\",\"rightKey\":[\"USER_ID_DERIVED\"],\"rightSelect\":[\"User_Name\",\"User_Username\",\"User_Profile_Name\",\"TIMESTAMP_DERIVED\",\"Lightning\"]},\"sources\":[\"Augment_usertodept\",\"compute_Lighning\"]},\"Compute_IsNull\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Userid_isNull\",\"name\":\"Userid_IsNull\",\"saqlExpression\":\"case\\nwhen 'Userid' is null then \\\"Yes\\\" else \\\"No\\\"\\nend\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Delete_Columns\"]},\"Compute_fields\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"TeamMemberRole\",\"name\":\"TeamMemberRole\",\"saqlExpression\":\"'D.Role.TeamMemberRole'\",\"type\":\"Text\"},{\"label\":\"Title\",\"name\":\"Title\",\"saqlExpression\":\"'D.Role.Title'\",\"type\":\"Text\"},{\"label\":\"Full_Name\",\"name\":\"Full_Name\",\"saqlExpression\":\"'D.Full_Name'\",\"type\":\"Text\"},{\"label\":\"Username\",\"name\":\"Username\",\"saqlExpression\":\"'D.Username'\",\"type\":\"Text\"},{\"label\":\"Clean_Name\",\"name\":\"Clean_Name\",\"saqlExpression\":\"'D.Clean_Name'\",\"type\":\"Text\"},{\"label\":\"Userid\",\"name\":\"Userid\",\"saqlExpression\":\"'D.Userid'\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Augment_LightningUsers\"]},\"compute_Lighning\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"defaultValue\":\"No\",\"label\":\"Lightning\",\"name\":\"Lightning\",\"saqlExpression\":\"\\\"Yes\\\"\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Drop_LightningPageViewColumns\"]},\"Register_Dataset\":{\"action\":\"register\",\"parameters\":{\"label\":\"LightningUsersFinal\",\"name\":\"LightningUsersFinal\"},\"sources\":[\"Append_Columns\"]},\"Drop_LightningPageViewColumns\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"EVENT_TYPE\"},{\"name\":\"TIMESTAMP_DERIVED\"},{\"name\":\"USER_ID_DERIVED\"},{\"name\":\"User_Name\"},{\"name\":\"User_Username\"},{\"name\":\"User_Profile_Name\"}],\"mode\":\"select\"},\"sources\":[\"Extract_LighningPageViewWIthUsers\"]},\"filter_login\":{\"action\":\"filter\",\"parameters\":{\"filter\":\"LoginTrue:EQ:TRUE\"},\"sources\":[\"compute_uniquelogin\"]},\"Extract_AcctTeamMember\":{\"action\":\"sobjectDigest\",\"parameters\":{\"fields\":[{\"name\":\"UserId\"},{\"defaultValue\":\"Null\",\"name\":\"TeamMemberRole\"},{\"name\":\"Title\"}],\"object\":\"AccountTeamMember\"}},\"Extract_LighningPageViewWIthUsers\":{\"action\":\"dataset\",\"parameters\":{\"name\":\"LightningUsersToDate\"}},\"Filter_Nonusers\":{\"action\":\"filter\",\"parameters\":{\"filter\":\"AIA.Lightning:N:Yes\"},\"sources\":[\"Augment_Users\"]},\"Delete_Columns\":{\"action\":\"sliceDataset\",\"parameters\":{\"fields\":[{\"name\":\"Previous_Date\"},{\"name\":\"First_Login\"},{\"name\":\"LoginTrue\"},{\"name\":\"D.Full_Name\"},{\"name\":\"D.Username\"},{\"name\":\"D.Clean_Name\"},{\"name\":\"D.Role.TeamMemberRole\"},{\"name\":\"D.Role.Title\"},{\"name\":\"Full_Name\"},{\"name\":\"D.Userid\"}],\"mode\":\"drop\"},\"sources\":[\"Compute_fields\"]},\"Append_Columns\":{\"action\":\"append\",\"parameters\":{\"enableDisjointedSchemaMerge\":true},\"sources\":[\"Compute_IsNull\",\"Delete_AIAColumns\"]},\"compute_relativedates\":{\"action\":\"computeRelative\",\"parameters\":{\"computedFields\":[{\"expression\":{\"offset\":\"previous()\",\"sourceField\":\"TIMESTAMP_DERIVED\",\"default\":\"1970-01-01T00:00:00.000Z\"},\"label\":\"Previous_Date\",\"name\":\"Previous_Date\"},{\"expression\":{\"offset\":\"first()\",\"sourceField\":\"TIMESTAMP_DERIVED\"},\"label\":\"First_Login\",\"name\":\"First_Login\"}],\"orderBy\":[{\"direction\":\"asc\",\"name\":\"TIMESTAMP_DERIVED\"}],\"partitionBy\":[\"User_Username\"]},\"sources\":[\"compute_Lighning\"]},\"Extract_AIAUsers\":{\"action\":\"dataset\",\"parameters\":{\"name\":\"AIA_Current_Users\"}},\"Compute_AIAfields\":{\"action\":\"computeExpression\",\"parameters\":{\"computedFields\":[{\"label\":\"Lightning\",\"name\":\"Lightning\",\"saqlExpression\":\"\\\"No\\\"\",\"type\":\"Text\"},{\"label\":\"Userid_IsNull\",\"name\":\"Userid_IsNull\",\"saqlExpression\":\"\\\"No\\\"\",\"type\":\"Text\"},{\"format\":\"yyyy-MM-dd’T’HH:mm:ss.SSS’Z’\",\"label\":\"TIMESTAMP_DERIVED\",\"name\":\"TIMESTAMP_DERIVED\",\"saqlExpression\":\"toDate('AIA.TIMESTAMP_DERIVED')\",\"type\":\"Date\"},{\"label\":\"EVENT_TYPE\",\"name\":\"EVENT_TYPE\",\"saqlExpression\":\"\\\"N/A\\\"\",\"type\":\"Text\"},{\"defaultValue\":\"0\",\"label\":\"Login\",\"name\":\"Login\",\"precision\":10,\"saqlExpression\":\"0\",\"scale\":0,\"type\":\"Numeric\"},{\"label\":\"TeamMemberRole\",\"name\":\"TeamMemberRole\",\"saqlExpression\":\"'Role.TeamMemberRole'\",\"type\":\"Text\"},{\"label\":\"Title\",\"name\":\"Title\",\"saqlExpression\":\"'Role.Title'\",\"type\":\"Text\"}],\"mergeWithSource\":true},\"sources\":[\"Filter_Nonusers\"]}}}",null]